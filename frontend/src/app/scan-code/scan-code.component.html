<app-header [icon]="icon" title="{{ 'SCAN_QR_CODE.TITLE' | translate }}"
            subTitle="{{ 'SCAN_QR_CODE.SUBTITLE' | translate }}"
            language="EN">
</app-header>
<div class="safe-zone">
  <div class="code-page">
    <div class="center-content">
      <div class="code-page__headline">{{ 'SCAN_QR_CODE.SCAN_CODE_HEADLINE' | translate }}</div>

      <div class="code-page__description text-secondary">{{ 'SCAN_QR_CODE.SCAN_CODE_DESCRIPTION' | translate }}</div>
      <div class="code-page__qr-code">

        <span *ngIf="code" class="code-page__qr-code-result">
          {{ 'SCAN_QR_CODE.YOUR_SCAN_CODE' | translate }}: {{code}}
        </span>
        <button type="button" (click)="openModal(webcamPreview)" class="btn btn-primary">
          {{ 'SCAN_QR_CODE.SCAN_CODE' | translate }}
        </button>
        <ng-template #webcamPreview>
          <div class="modal-header">
            <strong>{{ 'SCAN_QR_CODE.PLEASE_SCAN_CODE' | translate }}</strong>
            <div class="btn-group" dropdown>
              <button id="camera-list" dropdownToggle type="button" class="btn btn-primary dropdown-toggle"
                      aria-controls="dropdown-basic">
                {{ 'SCAN_QR_CODE.SWITCH_CAMERA' | translate }}<span class="caret"></span>
              </button>
              <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu"
                  role="menu" aria-labelledby="camera-list">
                <li *ngFor="let camera of scanCodeService.cameras$ | async"
                    (click)="webcamPreview.useCamera(camera)"
                    class="dropdown-item"
                    role="menuitem">
                  {{camera.name}}
                </li>
              </ul>
            </div>

          </div>
          <video #webcamPreview="webCamPreview" appWebcamPreview (codeScanned)="onCodeScanned($event)"></video>
        </ng-template>
      </div>
    </div>

    <div class="bottom-cta">
      <button type="button" *ngIf="code" class="btn-next btn btn-primary" routerLink="/registration" routerLinkActive="active">
        {{ 'NAVIGATION.NEXT' | translate }}
      </button>
    </div>

  </div>
</div>
